{"version":3,"sources":["modelbuilder.js"],"names":[],"mappings":"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","file":"modelbuilder.js","sourcesContent":["/** @jsx create */\n\nlet Role =\n<entity name='Role'>\n  <field />\n</entity>;\n\nlet User =\n<entity name = 'User' title='Пользователь'>\n  <field name ='name'/>\n  <field name ='password'/>\n  <field name ='birthDate' type='datetime'/>\n  <field name= 'manager'>\n    <belongsTo name = 'userManager' ref='User'/>\n  </field>\n  <field name= 'subordinate'>\n    <hasMany name = 'userManager' ref='User'/>\n  </field>\n  <field name='roles'>\n    <hasMany name ='userRole' ref='Role'/>\n  </field>\n  <field name='groups'>\n    <hasMany name='UserGroup' ref='Group#id' using='UserGroup#group'/>\n  </field>\n</entity>;\n\nlet Group = <entity name='Group'>\n  <field name='name' identity/>\n  <field name='title'/>\n  <field name='users'>\n    <belongsTo name='UserGroup' ref ='User#id' using='UserGroup#user'/>\n  </field>\n</entity>;\n\nlet UserGroup =\n<entity name='UserGroup'>\n  <field name='date' type='datetime'/>\n  <field name='user'>\n    <belongsTo ref='User#id'/>\n  </field>\n  <field name='group'>\n    <belongsTo ref='Group#name'/>\n  </field>\n</entity>;\n\nlet model = <model>\n  <entity name='User'/>\n  <entity name='UserGroup'/>\n  <entity name='Group'/>\n</model>;\n\nlet u = new Entity({\n    name: 'User',\n    fields: [\n      { name: 'id', },\n      { name: 'name', },\n      { name: 'groups', relation: { hasMany: { name: 'UserGroup', ref: 'Group#id' }}}\n    ]\n  });\n\nlet g = new Entity({\n          name: 'Group',\n          fields: [\n            { name: 'id', },\n            { name: 'name', },\n            { name: 'users',\n              relation: {\n                name: 'UserGroup',\n                hasMany: 'User#id',\n                using: 'UserGroup#user'\n              }\n            }\n          ]\n        });\n\nlet ug = new Entity({\n          name: 'UserGroup',\n          fields: [\n            {\n              name: 'user',\n              relation: {\n                name: 'UserGroup',\n                belongsTo: 'User#id',\n              },\n            },\n            {\n              name: 'group',\n              relation: {\n                name: 'UserGroup',\n                belongsTo: 'Group#id',\n              },\n            }\n          ]\n        });\n\nlet store = <model>\n  <entity name='Dictionary/Currency'>\n    <field name='name' identity/>\n    <field name='signature' required/>\n  </entity>;\n\n  <entity name='Inventory/Warehouse'>\n    <field name='name' identity />\n    <field name='regularityMin' type='number' default='1'/>\n    <field name='regularityMax' type='number' default='1'/>\n  </entity>\n\n  <entity name='Inventory/WarehouseItem'>\n    <field name='name' required/>\n    <field name='sku' required>\n      <belongsTo ref='Catalog/ToolPart#sku'/>\n    </field>\n    <field name='manufacturer' required/>\n    <field name='price' type='number'/>\n    <field name='currency' required>\n      <belongsTo ref='Dictionary/Currency#name'/>\n    </field>\n    <field name='lastUpdate' type='datetime'/>\n    <field name='warehouse' required>\n      <belongsTo ref='Inventory/Warehouse#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ImagePath'>\n    <field name='path' required/>\n    <field name='viewItem'>\n      <belongsTo ref='Catalog/ToolDetailViewItem'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolPart'>\n    <field name='name' required/>\n    <field name='sku' identity/>\n    <field name='inventoryItems'>\n      <hasMany ref='Catalog/ToolDetailViewItem#sku'/>\n    </field>\n    <field name='manufacturer' required>\n      <belongsTo ref='Manufacturer#name'/>\n    </field>\n    <field name='warehouseItems'>\n      <hasMany ref='Catalog/WarehouseItem#sku'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Category'>\n    <field name='name' identity/>\n    <field name='parent'>\n      <belongsTo ref='Catalog/Category#name'/>\n    </field>\n    <field name='children'>\n      <hasMany ref='Catalog/Category#name'/>\n    </field>\n    <field name='manufacturer' required>\n      <hasMany name='ManufacturerCategory' ref='Catalog/Manufacturer#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Manufacturer'>\n    <field name='name' identity/>\n    <field name='activeCategory'>\n      <hasMany name='ManufacturerCategory' ref='Category#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Tool'>\n    <field name='sku' identity/>\n    <field name='name' identity/>\n    <field name='description' identity/>\n    <field name='manufacturer'>\n      <belongsTo ref='Catalog/Manufacturer#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolDetail'>\n    <field name='name'/>\n    <field name='tool'>\n      <belongsTo ref='Catalog/Tool#sku'/>\n    </field>\n    <field name='picture'>\n      <belongsTo ref='Catalog/ImagePath#path'/>\n    </field>\n    <field name='items'>\n      <belongsTo ref='Catalog/ToolDetailViewItem'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolDetailViewItem'>\n    <field name='sku'>\n      <belongsTo ref='Catalog/ToolPart#sku'/>\n    </field>\n    <field name='key'/>\n    <field name='lv'/>\n    <field name='description'/>\n    <field name='qty'/>\n    <field name='standart'/>\n    <field name='note1'/>\n    <field name='note2'/>\n    <field name='note3'/>\n    <field name='imagePaths'>\n      <hasMany ref='ImagePath'/>\n    </field>\n    <field name='view'>\n      <hasMany ref='Catalog/ToolDetail'/>\n    </field>\n  </entity>\n</model>;\n"],"sourceRoot":"/source/"}