{"version":3,"sources":["model/modelpackage.js"],"names":[],"mappings":";;;;;;;;;;;;;IAEa;;;4BAEI,OAAO,YAAY;AAChC,UAAI,SAAS,IAAI,YAAJ,CAAiB,KAAjB,CAAT,CAD4B;AAEhC,iBAAW,OAAX,CAAmB,UAAC,MAAD,EAAW;AAC5B,eAAO,GAAP,CAAW,MAAX,EAD4B;OAAX,CAAnB,CAFgC;AAKhC,aAAO,MAAP,CALgC;;;;AAQlC,WAVW,YAUX,GAAc;0BAVH,cAUG;;;AAEZ,SAAK,QAAL,GAAgB,IAAI,GAAJ,EAAhB;;AAFY,QAIZ,CAAK,cAAL,GAAsB,IAAI,GAAJ,EAAtB;;AAJY,QAMZ,CAAK,SAAL,GAAiB,IAAI,GAAJ,EAAjB,CANY;GAAd;;eAVW;;wBAmBP,QAAQ;AACV,UAAI,gCAAJ,EAA8B;AAC5B,aAAK,QAAL,CAAc,GAAd,CAAkB,OAAO,IAAP,EAAa,MAA/B,EAD4B;AAE5B,eAAO,SAAP,CAAiB,IAAjB,EAF4B;OAA9B;AAIA,aAAO,MAAP,CALU;;;;wBAQR,MAAM;AACR,aAAO,KAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB,CAAP,CADQ;;;;2BAIH,MAAM;AACX,aAAO,KAAK,GAAL,CAAS,mBAAW,IAAX,CAAT,CAAP,CADW;;;;2BAIN,MAAM;AACX,UAAI,SAAS,KAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB,CAAT,CADO;AAEX,UAAI,MAAJ,EAAY;AACV,aAAK,QAAL,CAAc,MAAd,CAAqB,IAArB,EADU;AAEV,eAAO,SAAP,CAAiB,IAAjB,EAFU;OAAZ;;;;gCAQU;;;AACV,WAAK,QAAL,CAAc,OAAd,CAAsB,UAAC,CAAD,EAAM;AAC1B,UAAE,SAAF,QAD0B;OAAN,CAAtB,CADU;;;;wBAHD;AACT,aAAO,KAAK,QAAL,CAAc,IAAd,CADE;;;;SA1CA","file":"model/modelpackage.js","sourcesContent":["import { Entity } from '../model/entity';\n\nexport class ModelPackage {\n\n  static compose(props, entityList) {\n    let result = new ModelPackage(props);\n    entityList.forEach((entity)=> {\n      result.add(entity);\n    });\n    return result;\n  }\n\n  constructor() {\n    // список всех entity\n    this.entities = new Map();\n    // существующие в пакете identity\n    this.identityFields = new Map();\n    // ref для исправлений\n    this.relations = new Map();\n  }\n\n  add(entity) {\n    if (entity instanceof Entity) {\n      this.entities.set(entity.name, entity);\n      entity.ensureIds(this);\n    }\n    return entity;\n  }\n\n  get(name) {\n    return this.entities.get(name);\n  }\n\n  create(json) {\n    return this.add(new Entity(json));\n  }\n\n  remove(name) {\n    let entity = this.entities.get(name);\n    if (entity) {\n      this.entities.delete(name);\n      entity.removeIds(this);\n    }\n  }\n  get size() {\n    return this.entities.size;\n  }\n  ensureAll() {\n    this.entities.forEach((e)=> {\n      e.ensureFKs(this);\n    });\n  }\n}\n"],"sourceRoot":"/source/"}