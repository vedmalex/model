{"version":3,"sources":["modelbuilder.js"],"names":["Role","User","Group","UserGroup","model","u","Entity","name","fields","relation","hasMany","ref","g","using","ug","belongsTo","store"],"mappings":"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","file":"modelbuilder.js","sourcesContent":["/** @jsx create */\n\nlet Role =\n<entity name='Role'>\n  <field />\n</entity>;\n\nlet User =\n<entity name = 'User' title='Пользователь'>\n  <field name ='name'/>\n  <field name ='password'/>\n  <field name ='birthDate' type='datetime'/>\n  <field name= 'manager'>\n    <belongsTo name = 'userManager' ref='User'/>\n  </field>\n  <field name= 'subordinate'>\n    <hasMany name = 'userManager' ref='User'/>\n  </field>\n  <field name='roles'>\n    <hasMany name ='userRole' ref='Role'/>\n  </field>\n  <field name='groups'>\n    <hasMany name='UserGroup' ref='Group#id' using='UserGroup#group'/>\n  </field>\n</entity>;\n\nlet Group = <entity name='Group'>\n  <field name='name' identity/>\n  <field name='title'/>\n  <field name='users'>\n    <belongsTo name='UserGroup' ref ='User#id' using='UserGroup#user'/>\n  </field>\n</entity>;\n\nlet UserGroup =\n<entity name='UserGroup'>\n  <field name='date' type='datetime'/>\n  <field name='user'>\n    <belongsTo ref='User#id'/>\n  </field>\n  <field name='group'>\n    <belongsTo ref='Group#name'/>\n  </field>\n</entity>;\n\nlet model = <model>\n  <entity name='User'/>\n  <entity name='UserGroup'/>\n  <entity name='Group'/>\n</model>;\n\nlet u = new Entity({\n    name: 'User',\n    fields: [\n      { name: 'id', },\n      { name: 'name', },\n      { name: 'groups', relation: { hasMany: { name: 'UserGroup', ref: 'Group#id' }}}\n    ]\n  });\n\nlet g = new Entity({\n          name: 'Group',\n          fields: [\n            { name: 'id', },\n            { name: 'name', },\n            { name: 'users',\n              relation: {\n                name: 'UserGroup',\n                hasMany: 'User#id',\n                using: 'UserGroup#user'\n              }\n            }\n          ]\n        });\n\nlet ug = new Entity({\n          name: 'UserGroup',\n          fields: [\n            {\n              name: 'user',\n              relation: {\n                name: 'UserGroup',\n                belongsTo: 'User#id',\n              },\n            },\n            {\n              name: 'group',\n              relation: {\n                name: 'UserGroup',\n                belongsTo: 'Group#id',\n              },\n            }\n          ]\n        });\n\nlet store = <model>\n  <entity name='Dictionary/Currency'>\n    <field name='name' identity/>\n    <field name='signature' required/>\n  </entity>;\n\n  <entity name='Inventory/Warehouse'>\n    <field name='name' identity />\n    <field name='regularityMin' type='number' default='1'/>\n    <field name='regularityMax' type='number' default='1'/>\n  </entity>\n\n  <entity name='Inventory/WarehouseItem'>\n    <field name='name' required/>\n    <field name='sku' required>\n      <belongsTo ref='Catalog/ToolPart#sku'/>\n    </field>\n    <field name='manufacturer' required/>\n    <field name='price' type='number'/>\n    <field name='currency' required>\n      <belongsTo ref='Dictionary/Currency#name'/>\n    </field>\n    <field name='lastUpdate' type='datetime'/>\n    <field name='warehouse' required>\n      <belongsTo ref='Inventory/Warehouse#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ImagePath'>\n    <field name='path' required/>\n    <field name='viewItem'>\n      <belongsTo ref='Catalog/ToolDetailViewItem'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolPart'>\n    <field name='name' required/>\n    <field name='sku' identity/>\n    <field name='inventoryItems'>\n      <hasMany ref='Catalog/ToolDetailViewItem#sku'/>\n    </field>\n    <field name='manufacturer' required>\n      <belongsTo ref='Manufacturer#name'/>\n    </field>\n    <field name='warehouseItems'>\n      <hasMany ref='Catalog/WarehouseItem#sku'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Category'>\n    <field name='name' identity/>\n    <field name='parent'>\n      <belongsTo ref='Catalog/Category#name'/>\n    </field>\n    <field name='children'>\n      <hasMany ref='Catalog/Category#name'/>\n    </field>\n    <field name='manufacturer' required>\n      <hasMany name='ManufacturerCategory' ref='Catalog/Manufacturer#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Manufacturer'>\n    <field name='name' identity/>\n    <field name='activeCategory'>\n      <hasMany name='ManufacturerCategory' ref='Category#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/Tool'>\n    <field name='sku' identity/>\n    <field name='name' identity/>\n    <field name='description' identity/>\n    <field name='manufacturer'>\n      <belongsTo ref='Catalog/Manufacturer#name'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolDetail'>\n    <field name='name'/>\n    <field name='tool'>\n      <belongsTo ref='Catalog/Tool#sku'/>\n    </field>\n    <field name='picture'>\n      <belongsTo ref='Catalog/ImagePath#path'/>\n    </field>\n    <field name='items'>\n      <belongsTo ref='Catalog/ToolDetailViewItem'/>\n    </field>\n  </entity>\n\n  <entity name='Catalog/ToolDetailViewItem'>\n    <field name='sku'>\n      <belongsTo ref='Catalog/ToolPart#sku'/>\n    </field>\n    <field name='key'/>\n    <field name='lv'/>\n    <field name='description'/>\n    <field name='qty'/>\n    <field name='standart'/>\n    <field name='note1'/>\n    <field name='note2'/>\n    <field name='note3'/>\n    <field name='imagePaths'>\n      <hasMany ref='ImagePath'/>\n    </field>\n    <field name='view'>\n      <hasMany ref='Catalog/ToolDetail'/>\n    </field>\n  </entity>\n</model>;\n"],"sourceRoot":"/source/"}