{"version":3,"sources":["model/fieldbase.js"],"names":["FieldBase","obj","validation","validate","valid","Error","toString","result","$obj","entity_","entity","props","res","JSON","parse","stringify","undefined"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;IAEaA,S,WAAAA,S;;;AACX,qBAAYC,GAAZ,EAAiB;AAAA;;AAAA,iHACTA,GADS;AAEhB;;;;mCAEcA,G,EAAK;AAClB,UAAMC,aAAa,qBAAUC,QAAV,CAAmBF,GAAnB,sBAAnB;AACA,UAAI,CAACC,WAAWE,KAAhB,EAAuB;AACrB,cAAM,IAAIC,KAAJ,CAAUH,WAAWI,QAAX,EAAV,CAAN;AACD;AACF;;;+BAMUL,G,EAAK;AACd,UAAIA,GAAJ,EAAS;AACP,yHAAiBA,GAAjB;;AAEA,YAAMM,SAAS,KAAKC,IAAL,gBAAgB,KAAKA,IAArB,IAA6B,EAA5C;;AAEA,YAAIC,UAAUR,IAAIS,MAAlB;AACA,YAAIA,SAASD,OAAb;;AAEAF,eAAOG,MAAP,GAAgBA,MAAhB;AACAH,eAAOE,OAAP,GAAiBA,OAAjB;;AAEA,aAAKD,IAAL,gBACKD,MADL;AAGD;AACF;;AAED;;;;+BACW;AACT,UAAII,QAAQ,KAAKH,IAAjB;AACA,UAAII,oHAAJ;AACA,aAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cACbH,GADa;AAEhBF,gBAAQC,MAAMD,MAAN,IAAgBC,MAAMF;AAFd,SAAX,CAAP;AAID;;AAED;;;;6BACS;AACP,UAAIE,QAAQ,KAAKH,IAAjB;AACA,UAAII,kHAAJ;AACA,aAAOC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,cACbH,GADa,EAAX,CAAP;AAID;;;wBAxCY;AACX,aAAO,KAAKJ,IAAL,GAAY,KAAKA,IAAL,CAAUE,MAAtB,GAA+BM,SAAtC;AACD","file":"model/fieldbase.js","sourcesContent":["import {ModelBase} from './modelbase';\nimport {validator} from '../validator';\nimport {FieldSchema} from '../schema';\n\nexport class FieldBase extends ModelBase {\n  constructor(obj) {\n    super(obj);\n  }\n\n  validateSchema(obj) {\n    const validation = validator.validate(obj, FieldSchema);\n    if (!validation.valid) {\n      throw new Error(validation.toString());\n    }\n  }\n\n  get entity() {\n    return this.$obj ? this.$obj.entity : undefined;\n  }\n\n  updateWith(obj) {\n    if (obj) {\n      super.updateWith(obj);\n\n      const result = this.$obj ? {...this.$obj} : {};\n\n      let entity_ = obj.entity;\n      let entity = entity_;\n\n      result.entity = entity;\n      result.entity_ = entity_;\n\n      this.$obj = {\n        ...result\n      };\n    }\n  }\n\n  // it get fixed object\n  toObject() {\n    let props = this.$obj;\n    let res = super.toObject();\n    return JSON.parse(JSON.stringify({\n      ...res,\n      entity: props.entity || props.entity_ ,\n    }));\n  }\n\n  // it get clean object with no default values\n  toJSON() {\n    let props = this.$obj;\n    let res = super.toJSON();\n    return JSON.parse(JSON.stringify({\n      ...res,\n      // entity: props.entity_,\n    }));\n  }\n}\n"],"sourceRoot":"/source/"}